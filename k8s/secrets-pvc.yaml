apiVersion: v1
kind: Secret
metadata:
  name: multisports-secrets
type: Opaque
data:
  # Base64 encoded secrets (use: echo -n "your-secret" | base64)
  secret-key: cHJvZHVjdGlvbi1zZWNyZXQta2V5LWNoYW5nZS1pbi1wcm9kdWN0aW9u
  database-url: cG9zdGdyZXNxbDovL2JldHRpbmdfdXNlcjpzZWN1cmVfcGFzc3dvcmRfMjAyNEBtdWx0aXNwb3J0cy1kYXRhYmFzZS1zZXJ2aWNlOjU0MzIvbXVsdGlzcG9ydHNfYmV0dGluZw==
  db-user: YmV0dGluZ191c2Vy
  db-password: c2VjdXJlX3Bhc3N3b3JkXzIwMjQ=
  grafana-password: YWRtaW4xMjM=
  redis-password: cmVkaXNfcGFzc3dvcmRfMjAyNA==
  jwt-secret: anNvbi13ZWItdG9rZW4tc2VjcmV0LWtleS0yMDI0
  api-keys: |
    {
      "anthropic": "c2stYW50LWFwaTAzLUxVN0ZHUENJY2pCSV9kNzFjT2k3WnhHdjlVY05jVVc4M3hDcC14ak9mZFFQaHZOZEpBcG8xTm5QanJjTVN0RGpFenJRUTBmeXRDU2haTmQwRlBpVTdRLXhNLXJTZ0FB",
      "perplexity": "c2stcHJvai1PamRRcGt3bENsWDY0ZmlUSVRNSmxIWDBJYkplSl9ERFBhX09QRFJ6LWRpMDAtZDFBZmtuU21DRXFlUW5tdDRodmhhUHY1TE92VDNCbGJrRkpmR3lDMkdNRGRJVGZyeU13WWdLNWlIR0pUTGltelV6c3BCaXh4SW55cjJCU244Vms4d2s4OEY4ZmFzTTRiLTdJYUZYTmg2dzRB",
      "openai": "c2stcHJvai1PamRRcGt3bENsWDY0ZmlUSVRNSmxIWDBJYkplSl9ERFBhX09QRFJ6LWRpMDAtZDFBZmtuU21DRXFlUW5tdDRodmhhUHY1TE92VDNCbGJrRkpmR3lDMkdNRGRJVGZyeU13WWdLNWlIR0pUTGltelV6c3BCaXh4SW55cjJCU244Vms4d2s4OEY4ZmFzTTRiLTdJYUZYTmg2dzRB"
    }
---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: multisports-data-pvc
spec:
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 10Gi
  storageClassName: standard
---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: multisports-analytics-pvc
spec:
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 20Gi
  storageClassName: standard
---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: multisports-prometheus-pvc
spec:
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 10Gi
  storageClassName: standard
---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: multisports-grafana-pvc
spec:
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 5Gi
  storageClassName: standard
---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: multisports-logs-pvc
spec:
  accessModes:
    - ReadWriteMany
  resources:
    requests:
      storage: 50Gi
  storageClassName: standard
---
apiVersion: v1
kind: ServiceAccount
metadata:
  name: multisports-service-account
  labels:
    app: multisports-platform
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: multisports-cluster-role
rules:
- apiGroups: [""]
  resources: ["pods", "services", "endpoints", "persistentvolumeclaims", "events", "configmaps", "secrets"]
  verbs: ["get", "list", "watch", "create", "update", "patch", "delete"]
- apiGroups: ["apps"]
  resources: ["deployments", "replicasets", "statefulsets"]
  verbs: ["get", "list", "watch", "create", "update", "patch", "delete"]
- apiGroups: ["networking.k8s.io"]
  resources: ["ingresses", "networkpolicies"]
  verbs: ["get", "list", "watch", "create", "update", "patch", "delete"]
- apiGroups: ["autoscaling"]
  resources: ["horizontalpodautoscalers"]
  verbs: ["get", "list", "watch", "create", "update", "patch", "delete"]
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: multisports-cluster-role-binding
subjects:
- kind: ServiceAccount
  name: multisports-service-account
  namespace: default
roleRef:
  kind: ClusterRole
  name: multisports-cluster-role
  apiGroup: rbac.authorization.k8s.io
---
apiVersion: autoscaling/v2
kind: HorizontalPodAutoscaler
metadata:
  name: multisports-backend-hpa
spec:
  scaleTargetRef:
    apiVersion: apps/v1
    kind: Deployment
    name: multisports-backend
  minReplicas: 3
  maxReplicas: 10
  metrics:
  - type: Resource
    resource:
      name: cpu
      target:
        type: Utilization
        averageUtilization: 70
  - type: Resource
    resource:
      name: memory
      target:
        type: Utilization
        averageUtilization: 80
  behavior:
    scaleUp:
      stabilizationWindowSeconds: 60
      policies:
      - type: Percent
        value: 100
        periodSeconds: 15
    scaleDown:
      stabilizationWindowSeconds: 300
      policies:
      - type: Percent
        value: 10
        periodSeconds: 60
---
apiVersion: autoscaling/v2
kind: HorizontalPodAutoscaler
metadata:
  name: multisports-analytics-hpa
spec:
  scaleTargetRef:
    apiVersion: apps/v1
    kind: Deployment
    name: multisports-analytics
  minReplicas: 2
  maxReplicas: 5
  metrics:
  - type: Resource
    resource:
      name: cpu
      target:
        type: Utilization
        averageUtilization: 70
  - type: Resource
    resource:
      name: memory
      target:
        type: Utilization
        averageUtilization: 80
---
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: multisports-network-policy
spec:
  podSelector:
    matchLabels:
      app: multisports-backend
  policyTypes:
  - Ingress
  - Egress
  ingress:
  - from:
    - namespaceSelector:
        matchLabels:
          name: ingress-nginx
    ports:
    - protocol: TCP
      port: 8000
  - from:
    - podSelector:
        matchLabels:
          app: multisports-analytics
    ports:
    - protocol: TCP
      port: 8000
  egress:
  - to:
    - podSelector:
        matchLabels:
          app: multisports-database
    ports:
    - protocol: TCP
      port: 5432
  - to:
    - podSelector:
        matchLabels:
          app: multisports-cache
    ports:
    - protocol: TCP
      port: 6379
  - to: []
    ports:
    - protocol: TCP
      port: 53
    - protocol: UDP
      port: 53
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: multisports-env-config
data:
  NODE_ENV: "production"
  REACT_APP_API_URL: "https://api.multisports.example.com"
  REACT_APP_ANALYTICS_URL: "https://analytics.multisports.example.com"
  REACT_APP_MONITORING_URL: "https://monitoring.multisports.example.com"
  LOG_LEVEL: "INFO"
  CORS_ORIGINS: "https://multisports.example.com,https://api.multisports.example.com"
  RATE_LIMIT_WINDOW: "900"
  RATE_LIMIT_MAX_REQUESTS: "100"
  SESSION_TIMEOUT: "3600"
  MAX_FILE_SIZE: "52428800" 